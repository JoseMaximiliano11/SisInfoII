<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Pago - Universidad</title>
  <link rel="stylesheet" href="CSS/estilopago.css">
  <link rel="stylesheet" href="CSS/estiloenca.css">
</head>
<body>
  <div id="header-container"></div>

  <script>
    fetch('Encabezado.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header-container').innerHTML = data;
      });
  </script>

  <div class="container-pago">
    <h1>Registro de Pago</h1>
    
    <div id="seleccion-metodo">
      <p class="instruccion">Seleccione el método de pago:</p>
      
      <div class="metodos-pago">
        <button class="btn-metodo" onclick="mostrarQR()">
          <div class="icono-wrapper">
            <svg class="icono-metodo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"/>
              <rect x="14" y="3" width="7" height="7"/>
              <rect x="3" y="14" width="7" height="7"/>
              <rect x="14" y="14" width="7" height="7"/>
              <rect x="5" y="5" width="3" height="3" fill="currentColor"/>
              <rect x="16" y="5" width="3" height="3" fill="currentColor"/>
              <rect x="5" y="16" width="3" height="3" fill="currentColor"/>
              <rect x="16" y="16" width="3" height="3" fill="currentColor"/>
            </svg>
          </div>
          <span>Código QR</span>
        </button>
        
        <button class="btn-metodo" onclick="mostrarTransferencia()">
          <div class="icono-wrapper">
            <svg class="icono-metodo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="5" width="20" height="14" rx="2"/>
              <line x1="2" y1="10" x2="22" y2="10"/>
              <line x1="7" y1="15" x2="7.01" y2="15"/>
              <line x1="11" y1="15" x2="13" y2="15"/>
            </svg>
          </div>
          <span>Transferencia Bancaria</span>
        </button>
      </div>
    </div>

    <!-- Panel de Código QR -->
    <div id="panel-qr" class="panel-pago" style="display: none;">
      <button class="btn-volver" onclick="volverSeleccion()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"/>
          <polyline points="12 19 5 12 12 5"/>
        </svg>
        Volver
      </button>
      
      <h2>Pago con Código QR</h2>
      <p class="instruccion">Escanea el código QR con tu aplicación bancaria:</p>
      
      <div class="qr-container">
        <div class="qr-box">
          <svg viewBox="0 0 200 200" class="qr-code">
            <!-- QR Code simulado con SVG -->
            <rect width="200" height="200" fill="white"/>
            
            <!-- Esquina superior izquierda -->
            <rect x="10" y="10" width="50" height="50" fill="none" stroke="black" stroke-width="8"/>
            <rect x="22" y="22" width="26" height="26" fill="black"/>
            
            <!-- Esquina superior derecha -->
            <rect x="140" y="10" width="50" height="50" fill="none" stroke="black" stroke-width="8"/>
            <rect x="152" y="22" width="26" height="26" fill="black"/>
            
            <!-- Esquina inferior izquierda -->
            <rect x="10" y="140" width="50" height="50" fill="none" stroke="black" stroke-width="8"/>
            <rect x="22" y="152" width="26" height="26" fill="black"/>
            
            <!-- Patrón central simulado -->
            <rect x="70" y="30" width="10" height="10" fill="black"/>
            <rect x="85" y="30" width="10" height="10" fill="black"/>
            <rect x="100" y="30" width="10" height="10" fill="black"/>
            <rect x="70" y="45" width="10" height="10" fill="black"/>
            <rect x="100" y="45" width="10" height="10" fill="black"/>
            
            <rect x="30" y="70" width="10" height="10" fill="black"/>
            <rect x="45" y="70" width="10" height="10" fill="black"/>
            <rect x="70" y="70" width="10" height="10" fill="black"/>
            <rect x="85" y="70" width="10" height="10" fill="black"/>
            <rect x="100" y="70" width="10" height="10" fill="black"/>
            <rect x="115" y="70" width="10" height="10" fill="black"/>
            <rect x="140" y="70" width="10" height="10" fill="black"/>
            <rect x="155" y="70" width="10" height="10" fill="black"/>
            
            <rect x="85" y="85" width="30" height="30" fill="black"/>
            
            <rect x="30" y="100" width="10" height="10" fill="black"/>
            <rect x="140" y="100" width="10" height="10" fill="black"/>
            <rect x="170" y="100" width="10" height="10" fill="black"/>
            
            <rect x="70" y="130" width="10" height="10" fill="black"/>
            <rect x="85" y="130" width="10" height="10" fill="black"/>
            <rect x="100" y="130" width="10" height="10" fill="black"/>
            <rect x="140" y="130" width="10" height="10" fill="black"/>
            <rect x="155" y="130" width="10" height="10" fill="black"/>
            
            <rect x="70" y="155" width="10" height="10" fill="black"/>
            <rect x="100" y="155" width="10" height="10" fill="black"/>
            <rect x="140" y="155" width="10" height="10" fill="black"/>
            <rect x="170" y="155" width="10" height="10" fill="black"/>
            
            <rect x="70" y="170" width="10" height="10" fill="black"/>
            <rect x="85" y="170" width="10" height="10" fill="black"/>
            <rect x="115" y="170" width="10" height="10" fill="black"/>
            <rect x="140" y="170" width="10" height="10" fill="black"/>
          </svg>
        </div>
      </div>
      
      <div class="info-pago">
        <div class="info-item">
          <span class="info-label">Monto a pagar:</span>
          <span class="info-valor">Bs. 500.00</span>
        </div>
        <div class="info-item">
          <span class="info-label">Concepto:</span>
          <span class="info-valor">Matrícula Universitaria</span>
        </div>
      </div>

      <div class="form-comprobante">
        <label for="comprobante-qr">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          Subir comprobante de pago:
        </label>
        <input type="file" id="comprobante-qr" accept="image/*,.pdf" required>
        
        <label for="referencia-qr">Número de referencia:</label>
        <input type="text" id="referencia-qr" placeholder="Ej: 123456789" required>
        
        <button class="btn-confirmar" onclick="confirmarPago('qr')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          Confirmar Pago
        </button>
      </div>
    </div>

    <!-- Panel de Transferencia Bancaria -->
    <div id="panel-transferencia" class="panel-pago" style="display: none;">
      <button class="btn-volver" onclick="volverSeleccion()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"/>
          <polyline points="12 19 5 12 12 5"/>
        </svg>
        Volver
      </button>
      
      <h2>Transferencia Bancaria</h2>
      <p class="instruccion">Realiza la transferencia a la siguiente cuenta:</p>
      
      <div class="datos-bancarios">
        <div class="dato-banco">
          <span class="label">Banco:</span>
          <span class="valor">Banco Nacional</span>
        </div>
        <div class="dato-banco">
          <span class="label">Titular:</span>
          <span class="valor">Universidad Nacional</span>
        </div>
        <div class="dato-banco">
          <span class="label">Número de cuenta:</span>
          <span class="valor">1234567890</span>
        </div>
        <div class="dato-banco">
          <span class="label">NIT:</span>
          <span class="valor">1234567890</span>
        </div>
        <div class="dato-banco destacado-box">
          <span class="label">Monto:</span>
          <span class="valor destacado">Bs. 500.00</span>
        </div>
      </div>

      <div class="form-comprobante">
        <label for="comprobante-trans">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          Subir comprobante de pago:
        </label>
        <input type="file" id="comprobante-trans" accept="image/*,.pdf" required>
        
        <label for="referencia-trans">Número de referencia:</label>
        <input type="text" id="referencia-trans" placeholder="Ej: 123456789" required>
        
        <label for="fecha-pago">Fecha de la transferencia:</label>
        <input type="date" id="fecha-pago" required>
        
        <button class="btn-confirmar" onclick="confirmarPago('transferencia')">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          Confirmar Pago
        </button>
      </div>
    </div>
  </div>

  <script>
    function mostrarQR() {
      document.getElementById('seleccion-metodo').style.display = 'none';
      document.getElementById('panel-qr').style.display = 'block';
      document.getElementById('panel-transferencia').style.display = 'none';
    }

    function mostrarTransferencia() {
      document.getElementById('seleccion-metodo').style.display = 'none';
      document.getElementById('panel-qr').style.display = 'none';
      document.getElementById('panel-transferencia').style.display = 'block';
    }

    function volverSeleccion() {
      document.getElementById('seleccion-metodo').style.display = 'block';
      document.getElementById('panel-qr').style.display = 'none';
      document.getElementById('panel-transferencia').style.display = 'none';
    }

    function confirmarPago(metodo) {
      let archivo, referencia;
      
      if (metodo === 'qr') {
        archivo = document.getElementById('comprobante-qr').files[0];
        referencia = document.getElementById('referencia-qr').value;
      } else {
        archivo = document.getElementById('comprobante-trans').files[0];
        referencia = document.getElementById('referencia-trans').value;
        const fecha = document.getElementById('fecha-pago').value;
        
        if (!fecha) {
          alert('Por favor ingrese la fecha de transferencia');
          return;
        }
      }

      if (!archivo) {
        alert('Por favor suba el comprobante de pago');
        return;
      }

      if (!referencia) {
        alert('Por favor ingrese el número de referencia');
        return;
      }
     
      // Aquí puedes agregar la lógica para guardar en Supabase
      alert('¡Pago registrado exitosamente! ✓\n\nSu pago será verificado en las próximas 24-48 horas.');
      
      // Opcional: redirigir a página de confirmación
      // window.location.href = 'index.html';
    
 
      }
  </script>
</body>
</html>